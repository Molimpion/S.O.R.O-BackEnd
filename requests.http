# ===================================================================
# SETUP INICIAL: REGISTRO E LOGIN DO ADMINISTRADOR
# Use este arquivo no VS Code com a extensão "REST Client"
# ===================================================================

# --- VARIÁVEIS GLOBAIS ---

# AÇÃO 1: Defina a URL do seu serviço no Render.
@hostname = https://api-bombeiros-s-o-r-o.onrender.com 


# AÇÃO 2: APÓS EXECUTAR O PASSO 1.2, COPIE E COLE O TOKEN OBTIDO AQUI.
@adminToken =  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxNGRkYTUyNS0wN2NiLTRiYTUtODkyZi1mZDA4ZDRkYmJlN2IiLCJwcm9maWxlIjoiQURNSU4iLCJpYXQiOjE3NjA3MzczODYsImV4cCI6MTc2MDc2NjE4Nn0.w1NQk1QG2kkrGzAh2_58Ul3HE1jAfTSf8CdthJtIt7c


# ===================================================================
# 1. REGISTRO E LOGIN
# ===================================================================

### 1.1 - Cadastrar o primeiro usuário ADMIN
# AÇÃO: Execute esta requisição (POST /api/auth/register).
# O status esperado é 201 Created.
# O usuário será criado no seu banco de dados no Render.
# @name createAdmin
POST {{hostname}}/api/auth/register
Content-Type: application/json

{
  "name": "Maria Silva",
  "email": "mariasilva@bombeiros.com",
  "password": "cafedamanha123",
  "profile": "ADMIN",
  "matricula": "000000-0"
}

### 1.2 - Fazer login como ADMIN
# AÇÃO: Execute esta requisição (POST /api/auth/login).
# Na resposta, copie o valor do campo "token".
# Cole o token na variável @adminToken no topo deste arquivo.
# @name loginAdmin
POST {{hostname}}/api/auth/login
Content-Type: application/json

{
  "email": "mariasilva@bombeiros.com",
  "password": "cafedamanha123"
}

### 1.3 - Testar Acesso Admin
# AÇÃO: Após atualizar a variável @adminToken, execute esta requisição.
# O status esperado é 200 OK (se o token for válido).
# Esta é a rota de listagem de usuários, exclusiva para ADMIN.
# @name testAdminAccess
GET {{hostname}}/api/users
Authorization: Bearer {{adminToken}}